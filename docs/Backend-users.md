# Users

## Endpoints

## Migrations

Управление правами доступа осуществляется на основе групп, для автоматического создания группы администраторов и назначения прав доступа этой группе в приложении реализованы две миграции.

* **create_users_permissions**

Служит для принудительного создания permissions, так как в штатном режиме они создаются после выполнения миграций, эта миграция запускает процесс принудительно, лишние разрешения при этом не создаются.

* **administrator_group**

Миграция создает группу **Administrators**, пользователи которой обладают повышенными правами, и назначает группе права: {add, change, delete, view}_user

## Models

В прилоении реализованы две модели. Модель пользователей (User) наследованая от *AbstractUser* и модель *Subscription*, отражающая подписки пользователей.

#### User

Переназначение модели обусловлено необходимостью расширить стандартную модель пользователя.

Добавлены роли (user.role) *Administrator* и *User*, по умолчанию всем новым пользователям назначается роль *User* позволяющая выполнять стандартные действия в проекте.

При назначении роли *Administrator* список полномочий расширяется, пользователь автоматически добавляетсяя в группу Administrators и user.is_staff устанавливается True, для обеспечения возможности использования административным интерфейсом управления.

Если назначить пользователю роль *User* - пользователь удаляется из группы Administrators, флаг is_staff становится False

#### Subscription

Модель необходима для отслеживания подписок пользователей меет два поля:

* user - пользователь который подписывается

* author - автор на которого подписывается user

## Permissions
