# Users

## admin.py

Пользователям с ролью models.User.ADMIN доступно ограниченное управление пользователями, а именно возможность блокировать пользователей и изменять пароли.

Суперпользователь скрыт от администратора.

## models.py

В прилоении реализованы две модели. Модель пользователей (User) наследованая от *AbstractUser* и модель *Subscription*, отражающая подписки пользователей.

#### User

Переназначение модели обусловлено необходимостью расширить стандартную модель пользователя.

Добавлены роли (user.role) *Administrator* и *User*, по умолчанию всем новым пользователям назначается роль *User* позволяющая выполнять стандартные действия в проекте.

При назначении роли *Administrator* список полномочий расширяется, пользователь автоматически добавляетсяя в группу Administrators и user.is_staff устанавливается True, для обеспечения возможности использования административным интерфейсом управления.

Если назначить пользователю роль *User* - пользователь удаляется из группы Administrators, флаг is_staff становится False

#### Subscription

Модель необходима для отслеживания подписок пользователей меет два поля:

* user - пользователь который подписывается

* author - автор на которого подписывается user

## permissions.py

* IsNotAuthenticated: Проверяет что пользователь неавторизован, используется при регистрации пользователя, чтобы не допустить регистрации уже залогиненного пользователя.

## serializers.py

##### UserSerializer

Сериализатор пользователя, только для чтения.

```json
{
  "email": "user@example.com",
  "id": 0,
  "username": "string",
  "first_name": "Вася",
  "last_name": "Пупкин",
  "is_subscribed": false
}
```

is_subscribed определяется через фильтр БД._

##### UserPasswordSerializer

Используется для смены пароля пользователем.

Возможно использоавние только аутентифицированным пользователем.

Проверяет стандартными методами DJango сложность пароля.

##### UserSignupSerializer

Регистрация пользователя.

Проверяет что имя пользователя не **me**

Проверяет что имя пользователя и почта не используются.

Проверяет стандартными методами DJango сложность пароля.

## viewsets.py

* Возмоность зарегистрироватьс

* Сменить свой пароль

* Создать или удалить подписку на другого пользователя

* Получить собственный профиль
